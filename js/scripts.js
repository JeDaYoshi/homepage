// Generated by CoffeeScript 1.12.7
(function() {
  var app, n, xhr;

  Vue.component('repo-item', {
    props: ['repo'],
    template: '<a class="panel-block is-active" v-bind:href="repo.href">\n  <span class="panel-icon">\n      <i class="fas" v-bind:class="repo.type" aria-hidden="true"></i>\n  </span>\n  <span class="text">{{ repo.name }}</span>\n</a>'
  });

  Vue.component('lang-progress', {
    props: ['lang'],
    template: '<div class="panel-block" style="width:100%">\n    <p style="width:80%" data-value="80">{{lang.name}}</p>\n    <progress class="progress is-primary" max="100" :value="lang.value">{{lang.value}}%</progress>\n</div>'
  });

  app = new Vue({
    el: '#app',
    data: {
      search: '',
      repoList: [
        {
          name: 'yamamura1/yamamura-discord-bot',
          href: 'https://gitlab.com/yamamura1/yamamura-discord-bot',
          type: 'fa-code-branch'
        }, {
          name: 'jacobjordan94/mario-maker',
          href: 'https://github.com/jacobjordan94/mario-maker',
          type: 'fa-code-branch'
        }
      ],
      langList: [
        {
          name: 'JavaScript',
          value: 80
        }, {
          name: 'Objective-C',
          value: 25
        }, {
          name: 'Swift',
          value: 26
        }, {
          name: 'Python',
          value: 15
        }, {
          name: 'PHP',
          value: 2
        }, {
          name: 'Ruby',
          value: 5
        }
      ].sort(function(a, b) {
        return b.value - a.value;
      }),
      currentYear: (new Date).getFullYear() === 2019 ? '2019' : '2019-' + (new Date).getFullYear()
    }
  });

  document.querySelector('#reposearch').onkeyup = function() {
    var self;
    console.log(1);
    self = this;
    Array.from(document.querySelectorAll('.repo').values()).forEach(function(el) {
      console.log(el);
      if (el.innerText.includes(self.value)) {
        el.style = 'display: flex';
      } else {
        el.style = 'display: none';
      }
    });
  };

  n = Math.random();

  if (n < 1 / 3) {
    document.querySelector('#avatar-icon').classList.add('bump');
  } else if (n < 2 / 3) {
    document.querySelector('#avatar-icon').classList.add('ondulate');
  } else {
    document.querySelector('#avatar-icon').classList.add('both');
  }

  xhr = new XMLHttpRequest;

  xhr.onload = function() {
    var data;
    if (xhr.status >= 200 && xhr.status < 300) {
      data = JSON.parse(xhr.response);
      if (Array.isArray(data)) {
        app.repoList = data.map(function(repo) {
          return {
            name: repo.name,
            href: repo.html_url,
            desc: repo.description,
            type: "fa-book"
          };
        }).sort(function(a, b) {
          return a.name.localeCompare(b.name);
        }).concat(app.repoList);
      }
    } else {

    }
  };

  xhr.open('GET', 'https://api.github.com/users/Samplasion/repos');

  xhr.send();

}).call(this);
